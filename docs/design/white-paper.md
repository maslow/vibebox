# 需求分析报告

## 1. 项目核心与愿景 (Project Core & Vision)

- **核心价值**: 提供极致便捷、开箱即用的AI编码环境（"vibe server"），实现零配置、订阅即用。
- **核心目标**: 利用低成本服务器资源，将其包装为高价值、易于订阅的AI原型验证工具，帮助开发者专注于创意本身，而非繁琐的环境配置。

## 2. 目标用户与关键场景 (Target Users & Key Scenarios)

- **目标用户**:
    1. **首要 (Primary)**: **独立开发者 / 技术爱好者**。他们看重效率，需要一个即时可用的环境来快速验证新想法。
    2. **次要 (Secondary)**: **AI初学者 / 学生**。他们需要一个零门槛的沙盒环境来学习和实验AI编码。
- **关键场景**: 独立开发者（首要用户）突然有了一个AI创意或想测试某个API，需要一个已预装好所有工具（Vibe, Web栈, API Key）的即时环境来快速验证原型，避免繁琐配置，用完即走。

## 3. 商业定位 (Business Positioning)

- **商业模式**: **分层订阅 (Tiered Subscription)**。
- **模式描述**: 平台提供不同规格（如“基础版”、“专业版”）的服务器套餐，用户按月/年付费订阅。
- **核心价值点**: 订阅费用中已**包含固定额度的Claude API用量**（例如“专业版”包含 $20/月 的用量），为用户提供了极高的性价比和可预测的成本。

## 4. 核心功能需求 (Core Functional Requirements)

### 4.1. 范围内的功能 (In-Scope Features)

- **模块1：Vibe Server 实例管理**
    - **订阅绑定**: 用户的每一个“分层订阅”产品，都自动关联一个专属的、持久化的 vibe server 实例。
    - **实例状态管理**: 用户可以在平台（网页或App）上对该实例执行 `启动`、`停止`、`重启` 操作。
    - **完全开放 (Root Access)**: 用户获得服务器的完全（root）权限，可以自由安装软件或修改配置。
    - **预装环境 (Standard Environment)**: 实例交付时，已预装 `claude code`, `happy-coder` (及其依赖 `Node.js`), `Python` 和 `Nginx`。
- **模块2：API 用量管理**
    - **预装API Key**: 实例交付时，已预装了与订阅等级匹配的Claude API Key（该Key在Claude后台被设置了严格的月度用量上限）。
    - **用量可视化**: 用户在平台（网页/App）上可以清晰看到当前计费周期内的API用量（例如：已使用 $3.5 / $10.0 总额度）。
    - **硬停止与重置**: 当API额度用尽时，API调用将失败。平台会提示用户“额度已用尽”，并告知他们额度将在下个计费周期自动重置。
- **模块3：Vibe Coding 客户端体验**
    - **聊天会话集成 (核心)**: 平台（Web/App）深度集成 `happy-client`，用户通过一个聊天界面与专属vibe server上的 `claude code` 进行对话式编码。
    - **传统访问支持 (Fallback)**: 平台在实例管理界面，清晰展示服务器的连接信息（如 `IP地址`, `SSH端口 (22)`, `Web端口 (80/443)`, 以及 `Root密码`或`SSH密钥`），允许用户通过传统SSH方式连接服务器。
- **模块4：用户账户与订阅管理**
    - **混合认证 (Flexible Auth)**: 平台提供多种便捷的注册和登录方式，至少包括 `社交登录 (GitHub/Google)` 和 `手机号+验证码` (例如通过 Logto 实现)。
    - **套餐展示页**: 平台提供清晰的页面，用于展示不同“分层订阅”套餐的规格、API额度和价格。
    - **支付集成**: 平台集成第三方支付网关（如Stripe、支付宝），用户点击“订阅”按钮后跳转至支付页面完成购买。
- **模块5：运营管理后台 (Admin Portal)**
    - **自动化交付 (Automated Provisioning)**: 后台系统的核心职责是实现新订阅的自动化交付。它应能（1）监听支付成功事件，（2）从资源池获取服务器，（3）执行标准环境（Vibe工具, Web栈）的预安装与配置，（4）将实例与用户账户绑定。
- **模块6：用户支持与反馈**
    - **电子邮件支持 (Email Support)**: 平台在显著位置（如页脚）提供一个 `support@...` 电子邮箱地址，作为所有技术支持和账单请求（如取消订阅）的唯一渠道。

### 4.2. 明确排除的功能 (Out-of-Scope Features)

*(以下功能在当前MVP阶段明确排除，以确保核心价值的快速交付)*

- **一键重置实例 (One-click Reset)**: 暂不提供将服务器恢复到初始状态的功能。
- **API用量叠加包/升级**: 暂不提供API额度用尽后的即时充值或套餐升级功能。
- **Docker 预装**: 暂不在标准环境中预装 Docker（用户可自行安装）。
- **自助取消订阅**: 暂不提供。用户需要通过电子邮件支持渠道手动申请。
- **自助账单管理**: 暂不提供查看历史账单、修改支付方式等功能。
- **复杂后台管理**: 暂不包含数据分析仪表盘、资源池监控、复杂用户管理等后台功能。
- **工单系统或实时客服**: 暂不提供，仅通过电子邮件支持。