VibeBox PRD

**Tags:** #design:prd #design:user-journey #feature:vibebox #feature:subscription #feature:mobile-first #principle:simplicity

## 术语说明

**核心术语：**
- **Box / VibeBox**: 用户订阅的完整开发环境（包含预配置服务器 + Claude API Key）
- **Boxes**: 移动端 Tab 名称，用户的 VibeBox 列表管理界面（等同于"我的 Boxes"）
- **服务器/实例**: 技术层面的云服务器资源（从资源池分配，已预配置）
- **资源池**: 预配置的服务器和 API Key 库存，业务层从池中分配资源给用户

---

## 核心用户旅程

### 旅程 A：零障碍试用（推荐流程）

1. **发现与试用：** 独立开发者（首要用户）发现了 VibeBox，打开 App 后自动创建匿名账户，立即获得 3 天免费试用。
2. **核心编码（移动优先）：** 用户在移动设备上直接通过"聊天会话"界面（Chats Tab）开始与 `claude code` 对话，在通勤路上快速验证自己的 AI 创意。
3. **用量监控：** 在编码过程中，用户在 Boxes Tab 看到自己的 API 用量从 $0.0 增长到 $3.5 / $20.0（试用额度）。
4. **Box 管理：** 用户需要重启服务，于是在 Boxes Tab 点击了"重启"按钮。
5. **决定订阅：** 3 天试用期快结束，用户觉得好用，决定订阅"专业版"。
6. **订阅与支付：** 用户浏览了不同规格的套餐，选择"专业版"，并通过微信支付/Stripe 成功支付了月费。
7. **账户绑定（可选）：** 订阅后，用户可以选择绑定手机号/邮箱/OAuth 账号，避免丢失数据。
8. **自动交付（秒级）：** 后台系统监听到支付成功，从资源池分配一个预配置的 Box（已安装 Vibe 环境、Web 栈和 Claude API Key），立即可用（<30秒）。
9. **继续编码：** 用户无缝继续使用，数据保留，API 额度升级到订阅套餐的额度。

### 旅程 B：直接订阅（传统流程）

1. **发现与注册：** 用户发现 VibeBox，选择使用 GitHub/Google 或手机号快速注册账户。
2. **订阅与支付：** 用户浏览套餐，选择"专业版"，通过微信支付/Stripe 支付月费。
3. **自动交付（秒级）：** 后台从资源池分配预配置的 Box（<30秒）。
4. **核心编码（移动优先）：** 用户在移动 App 的 Chats Tab 开始与 `claude code` 对话。
5. **用量监控：** 在 Boxes Tab 查看 API 用量。
6. **Box 管理：** 在 Boxes Tab 管理 Box 生命周期（启动/停止/重启）。
7. **高级访问（Fallback）：** 用户希望安装新工具，从 Boxes Tab 复制 IP 和 Root 密码，通过本地 SSH 登录服务器。
8. **服务支持：** 月底，用户通过邮件联系 `support@...` 申请取消订阅。

---

## 模块：零障碍体验（匿名试用）

### 用户故事：无需注册即可试用

> 作为 一个新用户（开发者/爱好者），
我希望 无需注册即可立即开始使用 VibeBox，
以便 快速验证这个产品是否适合我，降低尝试门槛。
>

### 验收标准 (AC)

- [AC] 用户首次打开 App 时，系统自动创建匿名账户（使用设备 ID）。
- [AC] 匿名账户自动获得 3 天免费试用期（时间限制，非用量限制）。
- [AC] 试用期内，用户可以完整体验所有核心功能（Chats、Boxes、Me）。
- [AC] 试用 Box 配置与基础套餐相同（2核4G、$10 API 额度）。
- [AC] 试用期间，用户可以随时选择订阅升级。

### 用户故事：试用期结束提醒

> 作为 一个试用用户，
当我的 3 天试用期即将结束时，
我希望 平台能提前提醒我，并引导我订阅，
以便 我可以决定是否继续使用，避免数据丢失。
>

### 验收标准 (AC)

- [AC] 试用期剩余 1 天时，App 显著提示"试用期剩余 X 小时"。
- [AC] 试用期结束后，Box 自动停止，但数据保留 7 天。
- [AC] 用户可以在 7 天内订阅恢复 Box 和数据。
- [AC] 7 天后未订阅，数据自动清理。

### 用户故事：匿名账户绑定

> 作为 一个试用后决定订阅的用户，
我希望 可以将匿名账户绑定到手机号/邮箱/OAuth 账号，
以便 在更换设备时可以恢复我的数据和订阅。
>

### 验收标准 (AC)

- [AC] 用户订阅后，平台引导用户绑定账户（手机号/邮箱/GitHub/Google）。
- [AC] 绑定后，用户可以在其他设备登录相同账户。
- [AC] 匿名账户绑定是可选的（用户可以跳过，但有数据丢失风险提示）。

---

## 模块：用户账户与订阅管理

### 用户故事：快速注册与登录（直接订阅用户）

> 作为 一个新用户（开发者/爱好者），
我希望 可以通过社交账号（GitHub/Google）或手机验证码快速注册和登录，
以便 立即开始浏览和使用平台。
> 

### 验收标准 (AC)

- [AC] 登录页面提供“使用 GitHub 登录”、“使用 Google 登录”和“手机号+验证码登录”三种方式。
- [AC] 用户使用任一方式首次登录时，系统自动为其创建账户。
- [AC] 已注册用户可以使用相同方式快速登录。

### 用户故事：浏览与选择订阅套餐

> 作为 一个潜在用户，
我希望 看到一个清晰的套餐对比页面，
以便 了解不同订阅等级（如基础版、专业版）的价格、服务器规格和包含的 API 额度。
> 

### 验收标准 (AC)

- [AC] 平台提供一个“套餐与定价”页面。
- [AC] 页面清晰展示至少两种套餐（例如“基础版”、“专业版”）。
- [AC] 每个套餐必须明确列出其核心规格、包含的 Claude API 月度额度（例如 $10/月），以及价格（月付/年付）。

### 用户故事：完成订阅支付

> 作为 一个选定套餐的用户，
我希望 通过集成的第三方支付网关（如Stripe或微信支付）完成订阅支付，
以便 激活我的 Box。
>

### 验收标准 (AC)

- [AC] 用户在套餐页点击"订阅"按钮后，被引导至 Stripe 或微信支付的标准化支付结账页面。
- [AC] 当用户支付成功后，他们被重定向回平台。
- [AC] 平台必须在用户返回时，明确显示"支付成功，Box 正在分配中"的提示（<30秒完成）。

### 用户故事：安全登出

> 作为 一个已登录的用户，
我希望 可以从平台轻松登出，
以便 确保我的账户在共享设备上的安全。
> 

### 验收标准 (AC)

- [AC] 平台在用户个人资料菜单（或导航栏）的显著位置提供“登出”按钮。
- [AC] 点击“登出”后，用户的会话被立即终止，并被重定向到登录页面。

## 模块：Box 交付与自动化（后台）

### 用户故事：自动化 Box 交付

> 作为 平台（后台系统），
当 一个新订阅支付成功时，
我需要 自动从资源池分配 Box 和 API Key，并完成账户绑定，
以便 用户可以"开箱即用"，无需等待人工干预。
>

### 验收标准 (AC)

- [AC] 后台系统必须能监听到来自支付网关（微信支付/Stripe）的"支付成功"Webhook 事件。
- [AC] 监听到事件后，系统自动从**服务器资源池**分配一个预配置的 Box（已安装 `claude code`, `happy-coder`, `Node.js`, `Python`, `Nginx`）。
- [AC] 系统自动从 **API Key 资源池**分配一个与订阅等级匹配的 Claude API Key（该 Key 在 Claude 后台有额度硬顶）。
- [AC] 系统将分配的服务器和 API Key 绑定到用户账户，更新 Box 状态为 `running`。
- [AC] 整个分配过程在 **<30秒** 内完成，用户立即可用。
- [AC] Box 的连接信息（IP、SSH 端口、Root 密码）被成功绑定到发起支付的用户账户。

## 模块：Box 管理

### 用户故事：管理 Box 生命周期

> 作为 一个已订阅用户，
我希望 在 Boxes Tab 上看到我的专属 Box，并能对其执行 启动、停止 和 重启 操作，
以便 我可以完全控制我的开发环境状态。
>

### 验收标准 (AC)

- [AC] 用户登录后，在 Boxes Tab 可以看到一个与其订阅绑定的专属 Box 卡片。
- [AC] Box 卡片必须实时显示当前状态（例如：运行中、已停止、启动中）。
- [AC] 平台提供功能明确的 `启动`、`停止`、`重启` 按钮。
- [AC] 执行操作时，界面提供即时的反馈（例如"正在重启中..."）。

### 用户故事：通过传统方式访问 Box（Root）

> 作为 一个高级用户，
我希望 在 Boxes Tab 上获取我 Box 的完整连接信息（IP、端口、Root凭证），
以便 我可以通过传统的 SSH 方式连接，并获得完全控制权（Root Access）以进行深度定制。
>

### 验收标准 (AC)

- [AC] 平台在 Boxes Tab 清晰、便捷地展示 Box 的 `IP 地址`。
- [AC] 平台展示 `SSH 端口` (默认为 22) 和 `Web 端口` (80/443)。
- [AC] 平台必须提供一种安全的方式，让用户能获取 `Root 密码` 或 `SSH 密钥`。
- [AC] 明确告知用户，他们拥有该 Box 的完全（Root）权限，可以自由安装软件或修改配置。

### 用户故事：使用预装的标准环境

> 作为 一名开发者，
当我 首次访问我的 Box 时，
我期望 核心的 AI 编码工具和 Web 栈（Vibe, Node, Python, Nginx）已经预装完毕，
以便 我能立即开始验证创意，而非配置环境。
>

### 验收标准 (AC)

- [AC] 从资源池分配的 Box 中，`claude code` 和 `happy-coder` 必须是已安装并立即可用的。
- [AC] `Node.js` 和 `Python` 的稳定版本必须已安装。
- [AC] `Nginx` 必须已安装并作为基础 Web 服务器运行。

## 模块：核心编码与 API 用量管理

### 用户故事：通过移动优先的聊天界面进行 AI 编码（核心）

> 作为 一名开发者（首要用户），
我希望 在移动App（主要）或Web端（辅助）内，直接使用一个集成的聊天界面（happy-client），
以便 我可以在任何移动场景下（通勤、咖啡厅等）与我专属 Box 上的 claude code 进行对话式编码，实现最高效的原型验证。
>

### 验收标准 (AC)

- [AC] 平台提供**原生iOS/Android应用**作为主要客户端，Web端作为辅助平台。
- [AC] 移动App提供流畅的"聊天"功能界面（Chats Tab），优化触屏操作和移动场景。
- [AC] 该界面是一个深度集成的 `happy-client` 客户端（基于React Native）。
- [AC] 该客户端自动连接到用户专属的 Box，无需用户手动配置 IP 或端口。
- [AC] 用户可以在移动设备上流畅地发送指令、查看文件、并接收 `claude code` 的编码响应。
- [AC] **单一统一客户端**：用户无需在不同App间切换，无需OAuth跳转，提供无缝体验。

### 用户故事：无感使用预置 API Key

> 作为 一名开发者，
当我 使用预装的 claude code 工具时，
我期望 Claude API Key 已经是预先配置好且立即可用的，
以便 我无需关心 Key 的申请、配置和泄露风险。
>

### 验收标准 (AC)

- [AC] Box 分配时，`claude code` 已配置了与其订阅等级匹配的 API Key（从 API Key 资源池分配）。
- [AC] 该 Key 在 Claude API 后台被设置了严格的月度用量上限（例如 $20），与用户订阅的额度一致。

### 用户故事：监控 API 用量

> 作为 一个已订阅用户，
我希望 在 Boxes Tab 清晰地看到我当前计费周期的 Claude API 用量，
以便 我能有效管理我的消耗，避免意外超支。
>

### 验收标准 (AC)

- [AC] 平台在 Boxes Tab 的 Box 卡片上，显示一个 API 用量可视化组件（如进度条或文本）。
- [AC] 显示格式必须清晰易懂（例如：`已使用 $3.5 / $10.0 总额度`）。

### 用户故事：处理 API 额度耗尽

> 作为 一名用户，
当 我的 API 额度在本周期用尽时，
我期望 平台能明确告知我这一状态，以及额度将何时恢复，
以便 我能有清晰的预期（MVP 阶段不支持叠加包）。
>

### 验收标准 (AC)

- [AC] 当 API 额度用尽时，Box 中的 `claude code` API 调用将开始失败。
- [AC] 平台（App/Web）在 Boxes Tab 的 API 用量显示区域，必须明确提示用户"额度已用尽"。
- [AC] 平台应同时告知用户："额度将在您的下个计费周期首日自动重置"。

## 模块：用户支持（MVP 范围）

### 用户故事：通过电子邮件获取支持

> 作为 一名用户，
当我 遇到技术问题或需要申请取消订阅时，
我希望 能通过一个明确的电子邮件地址联系到支持团队，
以便 获得人工帮助（MVP 阶段不支持自助）。
> 

### 验收标准 (AC)

- [AC] 平台在显著位置（如网站页脚、帮助中心）提供一个唯一的支持邮箱地址（例如 `support@...`）。
- [AC] 平台明确告知用户，所有技术支持、账单问题和订阅取消请求，均通过此电子邮件渠道处理。